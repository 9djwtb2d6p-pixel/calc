<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grade Calc</title>
<style>
:root{
  --bg:#0b0f14;
  --card:#11141a;
  --glass: rgba(255,255,255,0.03);
  --accent1:#6a7cff;
  --accent2:#3dd6c6;
  --good:#6fe3b6;
  --warn:#ffbe5b;
  --bad:#ff7d7d;
  --text:#e8eef3;
  --muted:#8a93a2;
  --shadow:0 10px 30px rgba(0,0,0,0.5);
  font-family:"Inter","Segoe UI",Roboto,sans-serif;
}
*{box-sizing:border-box;}
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding-top:40px;
  background:radial-gradient(900px 600px at 10% 10%, rgba(106,124,255,0.05), transparent),
             radial-gradient(900px 500px at 90% 90%, rgba(61,214,198,0.04), transparent),
             var(--bg);
  color:var(--text);
}
.container{
  width:100%;
  max-width:500px;
  background:var(--card);
  border-radius:20px;
  padding:30px;
  box-shadow:var(--shadow);
  display:flex;
  flex-direction:column;
  gap:20px;
}
h1{
  font-size:2rem;
  margin:0;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-align:center;
}
.input-group{
  display:flex;
  gap:10px;
  align-items:center;
}
input[type=number], input[type=text]{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.05);
  background:transparent;
  color:var(--text);
  font-size:16px;
}
input:focus{border-color:var(--accent1);}
button{
  padding:8px 14px;
  border:none;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  color:#071027;
  transition:transform .15s;
}
button:hover{transform:translateY(-2px);}
.grades{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.grade-row{
  display:flex;
  align-items:center;
  gap:10px;
}
.grade-row input{
  flex:1;
  padding:8px;
  border-radius:8px;
  border:1px dashed rgba(255,255,255,0.03);
  background:transparent;
  color:var(--text);
}
.remove-btn{
  padding:6px 10px;
  font-size:12px;
  background:var(--bad);
  color:#fff;
  border-radius:8px;
}
.remove-btn:hover{
  opacity:0.85;
}
.suggestion{
  font-size:12px;
  color:var(--muted);
  flex:1;
}
.result{
  text-align:center;
  padding:20px;
  border-radius:15px;
  background:var(--glass);
  border:1px solid rgba(255,255,255,0.04);
  box-shadow:0 8px 20px rgba(0,0,0,0.4);
  display:flex;
  flex-direction:column;
  gap:12px;
}
.result .num{
  font-size:3rem;
  font-weight:700;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.result .letter{
  font-size:2rem;
  font-weight:700;
}
.meter{
  width:100%;
  height:20px;
  border-radius:10px;
  background:rgba(255,255,255,0.05);
  overflow:hidden;
}
.meter .fill{
  height:100%;
  width:0%;
  border-radius:10px;
  transition: width 0.5s, background 0.5s;
}
.advanced{
  display:none;
  flex-direction:column;
  gap:10px;
  border-top:1px solid rgba(255,255,255,0.05);
  padding-top:10px;
}
.show-advanced{display:flex;}
.small{font-size:12px;color:var(--muted);}
.reset-btn{
  background:var(--accent2);
}
.flex-row{display:flex;gap:10px;}
</style>
</head>
<body>
<div class="container">
  <h1>Grade Calc</h1>
  <div class="input-group">
    <input type="number" id="numBoxes" min="1" max="20" value="3">
    <button id="createBtn">Create Inputs</button>
  </div>
  <div class="grades" id="gradesList"></div>
  <div class="result" id="result">
    <div class="num" id="avgNum">0.00</div>
    <div class="letter" id="letterGrade">–</div>
    <div class="meter"><div class="fill" id="gradeMeter"></div></div>
  </div>
  <div class="flex-row">
    <button id="addRowBtn">+ Add Grade</button>
    <button id="resetBtn" class="reset-btn">Reset All</button>
  </div>
  <button id="toggleAdvanced">Advanced Options</button>
  <div class="advanced" id="advancedOptions">
    <label>Precision:
      <select id="precision">
        <option value="2">2 decimals</option>
        <option value="1">1 decimal</option>
        <option value="0">Whole number</option>
      </select>
    </label>
    <div class="small">Optional: Adjust result decimal places</div>
  </div>
</div>

<script>
const gradesList=document.getElementById('gradesList');
const createBtn=document.getElementById('createBtn');
const addRowBtn=document.getElementById('addRowBtn');
const resetBtn=document.getElementById('resetBtn');
const numBoxes=document.getElementById('numBoxes');
const avgNum=document.getElementById('avgNum');
const letterGrade=document.getElementById('letterGrade');
const toggleAdvanced=document.getElementById('toggleAdvanced');
const advancedOptions=document.getElementById('advancedOptions');
const precisionEl=document.getElementById('precision');
const gradeMeter=document.getElementById('gradeMeter');

const gradingChart=[
  {grade:"A",min:3.6,max:4.0},
  {grade:"A-",min:3.31,max:3.6},
  {grade:"B+",min:3.01,max:3.31},
  {grade:"B",min:2.71,max:3.01},
  {grade:"B-",min:2.31,max:2.71},
  {grade:"C+",min:2.01,max:2.31},
  {grade:"C",min:1.71,max:2.01},
  {grade:"C-",min:1.31,max:1.71},
  {grade:"D",min:1,max:1.31},
  {grade:"F",min:0,max:1}
];

function letterToNum(letter){
  if(!letter) return null;
  letter=String(letter).trim().toUpperCase();
  const found=gradingChart.find(g=>g.grade===letter);
  return found?(found.min+found.max)/2:null;
}
function numToLetter(num){
  const found=gradingChart.find(g=>num>=g.min && num<g.max);
  return found?found.grade:"A";
}
function getColor(num){
  if(num>=2.71) return 'var(--good)';
  if(num>=1.71) return 'var(--warn)';
  return 'var(--bad)';
}

function createInputRow(index){
  const row=document.createElement('div');
  row.className='grade-row';
  
  const inp=document.createElement('input');
  inp.type='text';
  inp.placeholder=`Grade ${index+1}`;
  
  const removeBtn=document.createElement('button');
  removeBtn.textContent='X';
  removeBtn.className='remove-btn';
  removeBtn.title='Remove this grade';
  removeBtn.addEventListener('click',()=>{row.remove(); calculate();});
  
  const sugg=document.createElement('div');
  sugg.className='suggestion';
  
  inp.addEventListener('input',()=>{
    const val=inp.value.trim();
    let num=parseFloat(val);
    if(isNaN(num)){
      const n=letterToNum(val);
      sugg.textContent=n!==null?`≈ ${n.toFixed(2)}`:'';
    }else{
      const letter=numToLetter(num);
      sugg.textContent=`≈ ${letter}`;
    }
    calculate();
  });
  
  row.appendChild(inp);
  row.appendChild(removeBtn);
  row.appendChild(sugg);
  gradesList.appendChild(row);
}

function renderRows(n){
  gradesList.innerHTML='';
  for(let i=0;i<n;i++) createInputRow(i);
  calculate();
}

function addRow(){ createInputRow(gradesList.children.length); }
function resetAll(){ renderRows(0); }
function calculate(){
  const inputs=gradesList.querySelectorAll('input');
  let total=0,count=0;
  inputs.forEach(i=>{
    const val=i.value.trim();
    if(!val) return;
    let num=parseFloat(val);
    if(isNaN(num)) num=letterToNum(val);
    if(num!==null){ total+=num; count++; }
  });
  if(count===0){
    avgNum.textContent='0.00';
    letterGrade.textContent='–';
    gradeMeter.style.width='0%';
    gradeMeter.style.background='var(--bad)';
    return;
  }
  const precision=parseInt(precisionEl.value)||2;
  const avg=total/count;
  avgNum.textContent=avg.toFixed(precision);
  letterGrade.textContent=numToLetter(avg);
  const pct=Math.min(100,(avg/4)*100);
  gradeMeter.style.width=pct+'%';
  gradeMeter.style.background=getColor(avg);
}

createBtn.addEventListener('click',()=>{ renderRows(parseInt(numBoxes.value)||3); });
addRowBtn.addEventListener('click',addRow);
resetBtn.addEventListener('click',resetAll);
toggleAdvanced.addEventListener('click',()=>{ advancedOptions.classList.toggle('show-advanced'); });
precisionEl.addEventListener('change',calculate);

// Initialize with 3 grades
renderRows(3);
</script>
</body>
</html>
